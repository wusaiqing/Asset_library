<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<title>课程成绩录入</title>
<link href="../../../common/css/bootstrap/bootstrap.min.css" rel="stylesheet" />
<link href="../../../common/css/font-awesome.min.css" rel="stylesheet" />
<link href="../../../common/css/reset.css" rel="stylesheet" />
<link href="../../../common/css/gta-layout.css" rel="stylesheet" />
<link href="../../../common/css/sideBar.css" rel="stylesheet" />
<link href="../../../common/css/popup.css" rel="stylesheet" />
<link href="../../../common/css/skins.css" rel="stylesheet" />
<link href="../../../common/css/basic-data.css" rel="stylesheet" />
<link href="../../../common/js/base/core/page/pagination.css" rel="stylesheet" />
</head>
<body page-auth-code="ScoreService_Entry_Theroy_ScoreEntry">
	<!-- 内容框架 开始------------------------------------------------------------->
	<div class="layout-index">
		<div class="container-fluid">
			<div class="header-con mb10">
				<form id="queryForm">
					<div class="row">
						<div class="col-md-4 form-inline form-inp-con">
							<div class="form-group">
								<label for="name">学年学期：</label>
								<select class="form-control sel-com" id="semester" name="semester">
								</select>
							</div>
						</div>
						<div class="col-md-4 form-inline form-inp-con">
							<div class="form-group">
								<label for="name">
									<i class="text-danger">*</i>
									开课单位：
								</label>
								<select class="form-control sel-com" id="openDepartmentId" name="openDepartmentId">
									<option value="">--请选择--</option>
								</select>
							</div>
						</div>
						<div class="col-md-4 form-inline form-inp-con">
							<div class="form-group">
								<label>
									<i class="text-danger">*</i>
									课 程：
								</label>
								<select class="form-control sel-com" id="courseId" name="courseId">
									<option value="">--请选择--</option>
								</select>
							</div>
						</div>
						<div class="col-md-4 form-inline form-inp-con">
							<div class="form-group">
								<label for="name">
									<i class="text-danger">*</i>
									任课教师：
								</label>
								<select class="form-control sel-com" id="teacherNoAndName" name="teacherNoAndName">
									<option value="">--请选择--</option>
								</select>
							</div>
						</div>
						<div class="col-md-4 form-inline form-inp-con">
							<div class="form-group">
								<label for="name">
									<i class="text-danger">*</i>
									教学班号：
								</label>
								<select class="form-control sel-com" id="theoreticalTaskId" name="theoreticalTaskId">
									<option value="">--请选择--</option>
								</select>
							</div>
						</div>
					</div>
				</form>
				<button type="button" class="btn btn-primary header-btn" name="btnSearch" id="btnSearch">查询</button>
			</div>
		</div>
		<!--提示信息-->
		<div class="care-tips">
			<p>
				<span title="课程：" id="spanCourse">课程：</span>
				<span title="任课教师：" class="ml50" id="spanTeacher">任课教师：</span>
				<span title="教学班号：" class="ml50" id="spanTeachingClassNo">教学班号：</span>
			</p>
			<p class="mt8">
				<span title="总评成绩：" id="spanScoreSet">总评成绩：</span>
				<a class="ml80" auth-code="ScoreService_Entry_Theroy_ScoreEntry_ScoreSet" id="set" name="set" href="javascript:void(0);">设置成绩构成</a>
			</p>
		</div>
		<!-- 正式内容区域 开始 ------>
		<div class="sub-content">
			<div class="row">
				<div class="col-xs-12">
					<div class="box">
						<div class="clearfix">
							<div class="pull-left care-tips2 mt20">
								温馨提示：教学班共有
								<span id="spanWaitEntry" class="text-danger"> 0 </span>
								条未完成录入
							</div>
							<div class="box-header pull-right">
								<button type="button" class="btn btn-success width-default" id="btnSave" auth-code="ScoreService_Entry_Theroy_ScoreEntry_Save">保存</button>
								<button type="button" class="btn btn-success width-default" id="btnReview" auth-code="ScoreService_Entry_Theroy_ScoreEntry_Submit">送审</button>
							</div>
						</div>
						<div class="box-body">
							<div class="scorll-box score">
								<div class="table-box">
									<table class="table table-bordered table-hover">
										<thead id="tbodytitle">
											<tr>
												<th class="width48">序号</th>
												<th class="width12">学号</th>
												<th class="width12">姓名</th>
												<th class="width48">性别</th>
												<th class="width80">平时成绩</th>
												<th class="width80">期中成绩</th>
												<th class="width80">期末成绩</th>
												<th class="width80">技能成绩</th>
												<th class="width110">总评成绩</th>
												<th class="width100">特殊情况</th>
												<th>备注</th>
											</tr>
										</thead>
										<tbody id="tbodycontent" class="no-data-html">
											<tr>
												<td colspan='11'></td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
						</div>
						<div id="pagination" class="pagination"></div>
					</div>
				</div>
			</div>
		</div>
		<!-- 正式内容区域 结束 --- -->
	</div>
	<!-- 内容框架 结束 ------------------------------------------------------------>
	<!-- jquery版本 -->
	<script src="../../../common/js/base/jquery/jquery-1.9.1.min.js"></script>
	<!-- bootstrap -->
	<script src="../../../common/js/base/bootstrap/bootstrap.js"></script>
	<script src="../../../common/js/base/seajs/2.2.0/sea.js"></script>
	<!-- 弹窗 -->
	<script src="../../../common/js/base/jquery/jquery.artDialog.source.js"></script>
	<script src="../../../common/js/base/jquery/iframeTools.source.js"></script>
	<!-- 模块渲染template -->
	<script src="../../../common/js/base/jquery/jquery.tmpl.js"></script>
	<!-- 分页 -->
	<script src="../../../common/js/base/core/page/pagination.js"></script>
	<!-- 验证 -->
	<script src="../../../common/js/base/jquery/jquery.validate.js"></script>
	<script src="../../../common/js/base/jquery/jquery.validate.custom.js"></script>
	<!--加载meta IE兼容文件-->
	<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
<![endif]-->

	<!-- 列表标题 -->
	<script id="bodyTitleImpl" type="text/x-jquery-tmpl">
	<tr>
		<th class="width48">序号</th>
		<th class="width12">学号</th>
		<th class="width12">姓名</th>
		<th class="width48">性别</th>
	{{if usualRatio != null }}
		<th class="width80">平时成绩</th>
	{{/if}}
	{{if midtermRatio != null }}
		<th class="width80">期中成绩</th>
	{{/if}}
	{{if endtermRatio != null }}
		<th class="width80">期末成绩</th>
	{{/if}}
	{{if skillRatio != null }}
		<th class="width80">技能成绩</th>
	{{/if}}
		<th class="width110">总评成绩</th>
		<th class="width100">特殊情况</th>
		<th>备注</th>
	</tr>
	</script>
	
	<!-- 列表内容 -->
	<script id="bodyContentImpl" type="text/x-jquery-tmpl">
	{{each(i,item) list}}
	<tr>
		<td class="width48">${item.index}</td>
		<td class="width12 text-l" title="${item.studentNo}">${item.studentNo}</td>
		<td class="width12 text-l" title="${item.studentName}">${item.studentName}</td>
		<td class="width48" title="${item.sexName}">${item.sexName}</td>
	{{if scoreRegimenName != null && scoreRegimenName == "百分制" }}
		{{if usualRatio != null }}
			<td class="width80"><input type="text" class="form-control inp-mini text-r" index="${item.index}" id="usualScore${item.index}"  value="${item.usualScore}" maxlength="5" myattr="score" style="min-width:50px;" onkeyup="this.value=this.value.replace(/[^\d.]/g,'')" onafterpaste="this.value=this.value.replace(/[^\d.]/g,'')" /></td>
		{{/if}}
		{{if midtermRatio != null }}
			<td class="width80"><input type="text" class="form-control inp-mini text-r" index="${item.index}" id="midtermScore${item.index}"  value="${item.midtermScore}" maxlength="5" myattr="score" style="min-width:50px;" onkeyup="this.value=this.value.replace(/[^\d.]/g,'')" onafterpaste="this.value=this.value.replace(/[^\d.]/g,'')" /></td>
		{{/if}}
		{{if endtermRatio != null }}
			<td class="width80"><input type="text" class="form-control inp-mini text-r" index="${item.index}" id="endtermScore${item.index}" name="endtermScore" value="${item.endtermScore}" maxlength="5" myattr="score" style="min-width:50px;" onkeyup="this.value=this.value.replace(/[^\d.]/g,'')" onafterpaste="this.value=this.value.replace(/[^\d.]/g,'')" /></td>
		{{/if}}
		{{if skillRatio != null }}
			<td class="width80"><input type="text" class="form-control inp-mini text-r" index="${item.index}" id="skillScore${item.index}" name="skillScore" value="${item.skillScore}" maxlength="5" myattr="score" style="min-width:50px;" onkeyup="this.value=this.value.replace(/[^\d.]/g,'')" onafterpaste="this.value=this.value.replace(/[^\d.]/g,'')" /></td>
		{{/if}}	
		{{if usualRatio == null && midtermRatio == null && endtermRatio == null && skillRatio == null }}
			<td class="width110"><input  class="form-control inp-mini text-r" index="${item.index}" id="totalScore${item.index}" name="totalScore" value="${item.totalScore}" originalScoreId="${item.originalScoreId}" studentId="${item.userId}" maxlength="5" style="min-width:50px;" /></td>
		{{else}}
			<td class="width110"><input class="form-control inp-mini text-r" readonly index="${item.index}" id="totalScore${item.index}" name="totalScore" value="${item.totalScore}" originalScoreId="${item.originalScoreId}" studentId="${item.userId}" maxlength="5" style="min-width:50px;" /></td>
		{{/if}}	
	{{else}}
		<td class="width110">
		<select class="form-control sel-com" style="min-width:90px;" index="${item.index}" id="selectTotalScore${item.index}" name="selectTotalScore" value="${item.totalScore}" originalScoreId="${item.originalScoreId}" studentId="${item.userId}">
			</select>
			<input type="hidden" index="${item.index}" id="totalScore${item.index}" name="totalScore" value="${item.totalScore}" originalScoreId="${item.originalScoreId}" studentId="${item.userId}" percentageScore="${item.percentageScore}"  />
			</td>
		{{/if}}
		<td class="width100">
			<select class="form-control inp-mini" index="${item.index}" id="specialCaseId${item.index}" name="specialCaseId" value="${item.specialCaseId}">
			</select>
		</td>
		<td><input  class="form-control inp-mini text-l" index="${item.index}" id="remark${item.index}" name="remark" value="${item.remark}" maxlength="50" /></td>
	</tr>
	{{/each}}
	</script>
	<script type="text/javascript">
		//方法引用
		seajs.config({
			paths : {
				"basePath" : "../../../common/js",
				"configPath" : "../../../common/js/config",
				"localPath" : "../js"
			}
		});
		seajs.use("localPath/courseScoreEnter", function(courseScoreEnter) {
			courseScoreEnter.init();
		});
		seajs.use("basePath/utils/authority");
	</script>
</body>
</html>